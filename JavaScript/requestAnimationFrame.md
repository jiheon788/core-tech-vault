# requestAnimationFrame
requestAnimationFrame은 브라우저가 화면을 다시 그리기 전에 호출할 함수를 예약하는 방법입니다.

- 브라우저의 렌더링 주기에 맞추어 이벤트를 트리거하기 때문에, 모니터의 가변 주사율 이상으로 호출되지 않는다.
- ==지정된 간격에 애니메이션을 그리는게 아니라 다음 리페인트할때 예약한다.==
	- 브라우저의 상황에 맞게 동작예약
	- 비활성일때는 중지 ==(CPU 효율적으로 사용)==

**화면 갱신주기에 맞춰 실행**되므로, **1초에 60번(약 16ms마다)** 호출됩니다. 이를 통해 **CPU 자원을 아끼면서 애니메이션을 부드럽게 처리**할 수 있습니다.


>[!tip] setTimeout/setInterval의 한계
>
>setTimeout의 딜레이는 정확히 딜레이 시간 이후에 콜백함수 실행을 보장하지않는다. 딜레이 시간후에 콜백큐에 들어가는것을 보장하는 것이다.
>- setTimeout 또는 setInterval은 정확한 주기마다 프레임 호출이 보장이 안되는 것이다.
>	- 지연 시간 이후에 콜백 함수가 태스크 큐에 푸시되어 대기하게 되지만 콜 스택이 비어야 호출
>	- setInterval은 기본 딜레이 4ms
>	- 브라우저는 셋타임아웃 5번이상 중첩하면 4ms의 최소 타임아웃이 강제된다. + 4ms 보다 짧을때 타이버 과부하 방지를 위해 자동으로 4ms가 된다
>- 탭이 비활성화되어도 cpu를 차지한다. → 자원낭비