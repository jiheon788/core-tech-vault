# React의 상태 (State)
React에서 ==상태(State)란 컴포넌트의 데이터를 의미하며, 상태가 변경될 때 리렌더링이 발생한다==

- React는 **단방향 데이터 흐름 (unidirectional data flow)** 을 사용하며, 상태가 변경되면 해당 상태를 사용하는 컴포넌트가 리렌더링된다.
- 상태는 보통 [[Hooks#useState|useState]], `useReducer`를 통해 컴포넌트 내부에서 관리된다.

#### **상태(State)의 특징**

1. **컴포넌트 내부에서 선언**되며, 특정 컴포넌트에 종속됨.
2. **값이 변경되면 컴포넌트가 리렌더링**됨.
3. **부모 → 자식으로만 전달 가능** (Props 이용).
4. **불변성을 유지해야 React의 최적화가 가능**함 (`useState`로 관리되는 상태는 새로운 참조값을 만들어야 React가 변경을 감지함, [[React에서 불변성이 중요한 이유]])


### 전역 상태(Global State)란?

**"전역 상태(Global State)"란 여러 개의 컴포넌트에서 공유할 수 있는 상태**로, 효율적으로 관리해야 한다

- 전역 상태는 컴포넌트 간 데이터 공유를 쉽게 하기 위해 사용된다.
- 전역 상태는 하위 컴포넌트뿐만 아니라, 형제 컴포넌트 또는 완전히 다른 위치에 있는 컴포넌트에서도 접근할 수 있어야 한다.
- 전역 상태를 관리하지 않으면 props drilling(깊은 단계의 컴포넌트로 props를 계속 전달해야 하는 문제)이 발생할 수 있다.
- 전역 상태를 비효율적으로 관리하면 **불필요한 리렌더링, 메모리 낭비, 성능 저하** 등의 문제가 발생

##### 전역 상태가 필요한 경우

- 여러 개의 컴포넌트가 동일한 데이터를 필요로 할 때
    - 예: 인증 정보(로그인 상태), UI 테마 설정, 다국어 설정 등
- 컴포넌트 간 데이터 전달이 불편할 때
    - props drilling을 피하기 위해 전역 상태가 필요
- 동일한 상태를 여러 군데에서 수정해야 할 때
    - 예: 장바구니 데이터, 사용자 설정, 알림 등

##### 전역 상태가 비효율적으로 관리될 때 발생하는 문제

- 불필요한 리렌더링 문제
- 상태 의존성이 복잡해짐
- 메모리 사용량 증가 (불필요한 상태 보관)
- 디버깅과 유지보수가 어려워짐

##### 전역 상태를 효율적으로 관리하는 방법

- 필요한 곳에서만 상태를 전역으로 관리
- 분리해서 사용하기 (contextAPI 분리, slice)
	- Redux는 Slice 단위로 분리
	- Recoil은 Atom 단위로 분리
- 리렌더링을 줄이는 방법
	- **Redux**: `useSelector()` 사용 시 `reselect`를 활용해 메모이제이션.
	- **Recoil**: `useRecoilCallback()`을 사용해 불필요한 리렌더링 방지.
	- **Context API**: 
		- Context API는 역할별로 분리 (구독한 모든 컴포넌트가 리렌더링 되기 때문)
		- `useMemo()`, `useReducer()`를 사용해 최적화.




##### 전역 상태 라이브러리 종류

|라이브러리|상태 관리 방식|특징|
|---|---|---|
|**Jotai**|Atomic State (원자 단위 상태)|개별 상태 단위를 독립적으로 관리하고 의존성 추적을 통해 필요한 컴포넌트만 리렌더링|
|**Recoil**|Atomic State + Selector|Jotai와 유사하지만 비동기 데이터 흐름을 자체적으로 지원 (Selector 개념)|
|**Redux**|Immutable State + Reducer|상태 변경을 순수 함수로 관리하며, 중앙 집중식 스토어에서 관리|
|**MobX**|Observable State|상태를 감지 가능한 객체로 만들고, 이를 기반으로 반응형 업데이트 수행|
|**Context API**|Hierarchical State|React의 기본 Provider/Consumer 패턴을 활용한 계층적 상태 공유|
[[전역 상태 라이브러리 비교]]