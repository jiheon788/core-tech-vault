# React의 렌더링 방식
### 리액트는 어떤 문제를 해결하려고 나왔나
UI업데이트의 복잡성을 해결하기 위함이다. ->  돔 조작을 효율적으로하고 컴포넌트 단위로 개발하여 코드의 가독성과 재사용성 및 유지보수성 향상

### 렌더링 방식

![[Pasted image 20250131204006.png]]

1. Render Phase
	- 컴포넌트를 계산하고 업데이트 사항을 파악하는 단계
	- 컴포넌트 호출 -> React Element 객체 생성 -> [[Virtual DOM]] 생성

2. Commit Phase
	- 변경사항을 실제 DOM에 반영
	- [[Virtual DOM]]을 실제 DOM에 반영한다
	- 이후 Critical Rendering Path ([[브라우저 렌더링 파이프라인]]) 진행


### 이렇게 하는 이유는 무엇일까?
- 직접적인 DOM조작은 [[Reflow와 Repaint]]를 유발하므로 최소화 해야한다.
- 동시에 발생하는 업데이트를 최대한 모아 한번에 DOM 수정하는 방식
- DOM 수정을 최소화하여 대부분의 상황에서 빠른 업데이트를 보장한다 
	- 항상 최고의 속도 보장 X (가상돔을 생성하고 비교하는데도 연산이 필요)
	- 대부분의 상황에 충분히 빠른 속도 O
- 내부적인 구현을 몰라도 컴포넌트만 작성하여 위 이점을 쉽게 누릴 수 있음


### 리액트에서 상태변화가 일어나고 화면이 변하는 과정
![[Pasted image 20250131204309.png]]

- **상태 변경**: `setState`를 호출합니다.
- **가상 DOM 업데이트**: 리액트는 **현재 가상 DOM**을 기반으로 **새로운 가상 DOM을 생성**합니다.
- **가상 DOM 비교**: 이전 가상 DOM과 새로운 가상 DOM을 ==비교(diffing)==하여 변경된 부분을 찾습니다.
- **실제 DOM 업데이트**: 변경된 부분만을 실제 DOM에 적용하여 **화면을 업데이트**합니다.
- **컴포넌트 생명주기 메서드 실행**: 이 과정에서 **`useEffect`와 같은 생명주기 메서드**가 호출되어 **부가적인 작업**을 수행할 수 있습니다.
- ==두개의 가상 DOM을 비교해서 실제 DOM에 반영하는 과정을 **재조정(Reconciliation)이라고 한다==


> [!tip] 파이버(Fiber)
> 파이버(Fiber)는 React의 재조정 알고리즘에 사용되는 객체이다. Fiber는 컴포넌트 트리의 각 요소를 표현하는 단위이며, 렌더링 작업을 작은 작업 단위로 나누어 처리할 수 있게 한다.

